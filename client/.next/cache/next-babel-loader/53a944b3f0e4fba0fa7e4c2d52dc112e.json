{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/nipun/Focaloid/Slim.AI/todo-demo/next-todo-demo/client/pages/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Navbar, InputGroup, Form, FormControl, ListGroup, Button, Container, Col, Row, Card, Toast } from 'react-bootstrap';\nimport NProgress from 'nprogress';\nimport 'nprogress/nprogress.css';\n\nfunction Home({\n  data\n}) {\n  const {\n    0: items,\n    1: setItems\n  } = useState(data);\n  const {\n    0: newitem,\n    1: setNewitem\n  } = useState({\n    complete: false,\n    todotext: \"\"\n  });\n  const {\n    0: toast,\n    1: setToast\n  } = useState({\n    text: \"\",\n    show: false\n  });\n  const baseUrl = \"http://localhost:9000/api\"; // API Calls\n\n  const getTodos = async () => {\n    let url = baseUrl + \"/\";\n\n    try {\n      await fetch(url).then(_ => {\n        console.log(_.status);\n        return _.json();\n      }).then(result => {\n        console.log(result);\n        setItems(result);\n      }).catch(_ => {\n        setToast({\n          text: \"data get error\",\n          show: true\n        });\n        console.log(\"error\", _);\n      });\n    } catch (e) {\n      console.log(\"Error : \", e);\n    }\n  };\n\n  const changeNewitemName = e => setNewitem(_newItem => {\n    _newItem.todotext = e.target.value;\n    return _objectSpread({}, _newItem);\n  });\n\n  const changeNewitemComplete = e => setNewitem(_newItem => {\n    _newItem.complete = e.target.checked;\n    console.log(_newItem);\n    return _objectSpread({}, _newItem);\n  });\n\n  const changeItemComplete = (e, item) => {\n    NProgress.start();\n    let url = baseUrl + \"/\" + item._id;\n    item.complete = !item.complete;\n    fetch(url, {\n      method: 'PUT',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(item)\n    }).then(_ => getTodos()).catch(_ => setToast({\n      text: \"todo update error\",\n      show: true\n    }));\n    NProgress.done();\n  };\n\n  const addItem = () => {\n    NProgress.start();\n    let data = {\n      todotext: newitem.todotext,\n      complete: newitem.complete\n    };\n    console.log(data);\n    let url = baseUrl + \"/\";\n    fetch(url, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    }).then(_ => {\n      console.log(_.status);\n      return _.json();\n    }).then(result => {\n      console.log(\"result\", result);\n      getTodos();\n      setNewitem({\n        complete: false,\n        todotext: \"\"\n      });\n    }).catch(_ => {\n      setToast({\n        text: \"todo add error\",\n        show: true\n      });\n      console.log(\"error\", _);\n    });\n    NProgress.done();\n  };\n\n  const deleteItem = id => {\n    NProgress.start();\n    let url = baseUrl + \"/\" + id;\n    fetch(url, {\n      method: \"DELETE\",\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(_ => {\n      getTodos();\n    }).catch(() => {\n      setToast({\n        text: \"todo delete error\",\n        show: true\n      });\n    });\n    NProgress.done();\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      bg: \"light\",\n      variant: \"light\",\n      children: /*#__PURE__*/_jsxDEV(Navbar.Brand, {\n        href: \"#home\",\n        children: \"Next Based Todo App\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        style: {\n          marginTop: 40 + 'px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          xs: \"10\",\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                paddingLeft: 30 + 'px'\n              },\n              children: \"Add Todo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            className: \"justify-content-xs-center\",\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              xs: \"10\",\n              children: /*#__PURE__*/_jsxDEV(InputGroup, {\n                className: \"mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(InputGroup.Prepend, {\n                  children: /*#__PURE__*/_jsxDEV(InputGroup.Checkbox, {\n                    onChange: changeNewitemComplete,\n                    checked: newitem.complete\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 136,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n                  onChange: changeNewitemName,\n                  placeholder: \"Add a new todo\",\n                  value: newitem.todotext\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              xs: \"2\",\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                onClick: addItem,\n                variant: \"outline-primary\",\n                children: \"Add Todo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 19\n              }, this), ' ']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          xs: \"2\",\n          children: /*#__PURE__*/_jsxDEV(Toast, {\n            onClose: () => setToast({\n              text: \"\",\n              show: false\n            }),\n            show: toast.show,\n            delay: 1000,\n            autohide: true,\n            children: [/*#__PURE__*/_jsxDEV(Toast.Header, {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                className: \"mr-auto\",\n                children: \"Error\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Toast.Body, {\n              children: toast.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 10\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 8\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: items.map(item => /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            border: item.complete == true ? \"success\" : \"primary\",\n            style: {\n              width: '18rem',\n              marginTop: 20 + \"px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n              children: item._id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n              children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n                children: item.todotext\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(ListGroup, {\n                variant: \"flush\",\n                children: [/*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                  children: [\" Completed ? \", /*#__PURE__*/_jsxDEV(Form.Check, {\n                    onChange: e => changeItemComplete(e, item),\n                    checked: item.complete,\n                    type: \"checkbox\",\n                    id: item._id\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 165,\n                    columnNumber: 56\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"outline-danger\",\n                    size: \"sm\",\n                    onClick: () => deleteItem(item._id),\n                    children: \"Delete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 43\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 8\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n}\n\nHome.getInitialProps = async ctx => {\n  NProgress.start();\n\n  try {\n    var res = await fetch(\"http://localhost:9000/api\");\n  } catch {\n    console.log(\"initial load error\");\n    NProgress.done();\n    return {\n      data: []\n    };\n  }\n\n  const data = await res.json();\n  NProgress.done();\n  return {\n    data: data\n  };\n};\n\nexport default Home;","map":{"version":3,"sources":["/home/nipun/Focaloid/Slim.AI/todo-demo/next-todo-demo/client/pages/index.js"],"names":["React","useState","Navbar","InputGroup","Form","FormControl","ListGroup","Button","Container","Col","Row","Card","Toast","NProgress","Home","data","items","setItems","newitem","setNewitem","complete","todotext","toast","setToast","text","show","baseUrl","getTodos","url","fetch","then","_","console","log","status","json","result","catch","e","changeNewitemName","_newItem","target","value","changeNewitemComplete","checked","changeItemComplete","item","start","_id","method","headers","body","JSON","stringify","done","addItem","deleteItem","id","marginTop","paddingLeft","map","width","getInitialProps","ctx","res"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Navbar, InputGroup, Form, FormControl, ListGroup, Button, Container, Col, Row, Card, Toast } from 'react-bootstrap'\nimport NProgress from 'nprogress'\nimport 'nprogress/nprogress.css'\n\nfunction Home( {data} ) {\n\n  const [items, setItems] = useState(data)\n  const [newitem, setNewitem] = useState({complete:false, todotext:\"\"})\n  const [toast, setToast] = useState({text:\"\",show:false})\n\n  const baseUrl = \"http://localhost:9000/api\";\n\n  // API Calls\n\n  const getTodos = async () => {\n      let url = baseUrl + \"/\"\n      try{\n        await fetch(url)\n                        .then( _ => {\n                          console.log(_.status);\n                          return _.json()\n                        }).then(result=>{\n                          console.log(result)\n                          setItems(result);\n                        })\n                        .catch( _ => {\n                          setToast({text:\"data get error\",show:true})\n                          console.log(\"error\",_);\n                        })\n        \n      }\n      catch (e){\n        console.log(\"Error : \",e);\n      }\n  }\n\n  const changeNewitemName = (e) => setNewitem(\n    (_newItem)=>{\n      _newItem.todotext = e.target.value; \n      return {..._newItem}\n    }\n  )\n\n  const changeNewitemComplete = (e) => setNewitem(\n    (_newItem) => {\n      _newItem.complete = e.target.checked;\n      console.log(_newItem);\n      return {..._newItem}\n    }\n  )\n\n  const changeItemComplete = (e, item) => {\n    NProgress.start()\n    let url = baseUrl + \"/\" + item._id;\n    item.complete = !item.complete\n    fetch(url, {\n      method: 'PUT',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(item)\n    })\n    .then( _ => getTodos())\n    .catch( _ => setToast({text:\"todo update error\",show:true}))\n    NProgress.done()\n  }\n\n  const addItem = () => {\n    NProgress.start()\n    let data = {\n      todotext : newitem.todotext,\n      complete : newitem.complete,\n    }\n    console.log(data);\n    let url = baseUrl + \"/\"\n    fetch(url, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    })\n    .then( _ => {\n      console.log(_.status);\n      return _.json()\n    }).then(result=>{\n      console.log(\"result\",result)\n      getTodos();\n      setNewitem({complete:false, todotext:\"\"})\n    })\n    .catch( _ => {\n      setToast({text:\"todo add error\",show:true})\n      console.log(\"error\",_);\n    })\n    NProgress.done()\n  }\n\n  const deleteItem = (id) => {\n    NProgress.start()\n    let url = baseUrl + \"/\" + id;\n    fetch(url,{\n      method: \"DELETE\",\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    })\n    .then( _ => {\n      getTodos();\n    })\n    .catch( () => {\n      setToast({text:\"todo delete error\", show:true});\n    })\n    NProgress.done()\n  }\n\n  return (\n    <>\n    <Navbar bg=\"light\" variant=\"light\">\n      <Navbar.Brand href=\"#home\">Next Based Todo App</Navbar.Brand>\n    </Navbar>\n    <Container>\n       <Row  style={{marginTop:40 + 'px'}} >\n         <Col xs=\"10\">\n          <Row>\n            <h3 style={{paddingLeft:30+'px'}} >Add Todo</h3>\n          </Row>\n          <Row className=\"justify-content-xs-center\" >\n              <Col xs=\"10\" >\n                <InputGroup className=\"mb-3\">\n                  <InputGroup.Prepend>\n                    <InputGroup.Checkbox onChange={changeNewitemComplete} checked={newitem.complete} />\n                  </InputGroup.Prepend>\n                  <FormControl onChange={changeNewitemName} placeholder=\"Add a new todo\" value={newitem.todotext} />\n                </InputGroup>\n              </Col>\n              <Col xs=\"2\" >\n                  <Button onClick={addItem} variant=\"outline-primary\">Add Todo</Button>{' '}\n              </Col>\n          </Row>\n         </Col>\n         <Col xs=\"2\" >\n            <Toast onClose={() => setToast({text:\"\",show:false})} show={toast.show} delay={1000} autohide>\n            <Toast.Header>\n              <strong className=\"mr-auto\">Error</strong>\n            </Toast.Header>\n              <Toast.Body>{toast.text}</Toast.Body>\n            </Toast>\n         </Col>    \n       </Row>\n       <Row>\n         { \n          items.map( \n            item => ( \n                <Col>\n                  <Card border={ item.complete == true ? \"success\" : \"primary\" } style={{ width: '18rem', marginTop: 20+\"px\" }}>\n                    <Card.Header>{item._id}</Card.Header>\n                    <Card.Body>\n                      <Card.Title>{item.todotext}</Card.Title>\n                      <ListGroup variant=\"flush\">\n                          <ListGroup.Item> Completed ? <Form.Check onChange={(e)=>changeItemComplete(e,item)} checked={item.complete} type=\"checkbox\" id={item._id} /></ListGroup.Item>\n                          <ListGroup.Item><Button variant=\"outline-danger\" size=\"sm\" onClick={() => deleteItem(item._id)} >Delete</Button></ListGroup.Item>\n                      </ListGroup>\n                      \n                    </Card.Body>\n                  </Card>\n                </Col> \n                )\n              )\n          }\n       </Row>\n    </Container>\n    </>\n  )\n}\n\nHome.getInitialProps = async (ctx) => {\n  NProgress.start()\n  try{\n    var res = await fetch(\"http://localhost:9000/api\")\n  }\n  catch {\n    console.log(\"initial load error\");\n    NProgress.done()\n    return {data: []}\n  }\n  const data = await res.json()\n  NProgress.done()\n  return { data: data }\n  \n}\n\n\nexport default Home"]},"metadata":{},"sourceType":"module"}